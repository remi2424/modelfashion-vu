module({"emscripten!northstar_api.min.js":"emscripten!/asset/0b25558bbe1b81e8/build/northstar/js/northstar_api.min.js"},function(c){var d=function(q){function f(n){if(n.isDeletable===m)return n;Array.prototype.slice.call(arguments,1);var l=n.name;void 0===a[l]&&(a[l]=0);var k=IMVU.createNamedFunction("Deletable_"+l,function(){n.apply(this,arguments);Object.defineProperty(this,"_referenceCount",{value:1,writable:!0});++b;++a[l]});Object.assign(k,n);k.isDeletable=m;k.prototype=Object.create(n.prototype,{constructor:{value:k,writable:!0}});k.prototype.delete=function(){if(0===--this._referenceCount){if(this.onDelete instanceof Function)this.onDelete();for(var t in this)Object.prototype.hasOwnProperty.call(this,t)?delete this[t]:this[t]=void 0;--b;--a[l]}};k.prototype.clone=function(){this._referenceCount+=1;return this};k.prototype.move=function(){return this};return k}var b=0,a={},m={};f.getObjectCount=function(){return b};f.getInstanceCounts=function(){return a};return f}({}),e=function(q){function f(b){b=b||{};this.__windowObj=b.windowObj||window;this.__documentObj=b.documentObj||document;this.__canvasEl=IMVU.requireProperty(b,"canvas");this.__isMouseDown=!1;this.__lastMousePos=[-1,-1];this.__currentMousePos=[-1,-1];this.__mouseDelta=[0,0];this.__mouseButton=0;this.__callbackMouseOut=this.__callbackMouseOver=this.__callbackMouseWheel=this.__callbackMouseDrag=this.__callbackMouseMove=this.__callbackMouseDown=this.__callbackMouseUp=null;this.__shiftKeyDown=this.__ctrlKeyDown=this.__altKeyDown=!1;this.__trackedTouchEvent=null;this.__canvasOnMouseDown=function(a,m){a.preventDefault&&a.preventDefault();this.__documentObj.addEventListener("mouseup",this.__documentOnMouseUp,!0);this.__documentObj.addEventListener("mousemove",this.__documentOnMouseMove,!0);this.__isMouseDown=!0;this.__mouseButton=a.which||m;this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseDown)}.bind(this);this.__documentOnMouseUp=function(a){a.preventDefault&&a.preventDefault();this.__documentObj.removeEventListener("mouseup",this.__documentOnMouseUp,!0);this.__documentObj.removeEventListener("mousemove",this.__documentOnMouseMove,!0);this.__isMouseDown=!1;this.__mouseButton=a.which;this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseUp)}.bind(this);this.__canvasOnMouseMove=function(a){a.preventDefault&&a.preventDefault();this.__isMouseDown||(this._updateMousePosition(a),this._callMouseHandler(this.__callbackMouseMove))}.bind(this);this.__documentOnMouseMove=function(a){a.preventDefault&&a.preventDefault();this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseDrag)}.bind(this);this.__canvasOnWheel=function(a){a.preventDefault&&a.preventDefault();this.__callbackMouseWheel&&this.__callbackMouseWheel({deltaMode:a.deltaMode,deltaX:a.deltaX,deltaY:a.deltaY})}.bind(this);this.__canvasOnTouchStart=function(a){if(null===this.__trackedTouchEvent){var m=Object.keys(a.changedTouches)[0];this.__trackedTouchEvent=a.changedTouches[m].identifier;this.__canvasOnMouseDown(a.changedTouches[m],1)}}.bind(this);this.__canvasOnTouchMove=function(a){null!==this.__trackedTouchEvent&&(a=a.changedTouches[this.__trackedTouchEvent])&&this.__documentOnMouseMove(a)}.bind(this);this.__canvasOnTouchEnd=function(a){null!==this.__trackedTouchEvent&&(a=a.changedTouches[this.__trackedTouchEvent])&&(this.__documentOnMouseUp(a),this.__trackedTouchEvent=null)}.bind(this);this.__canvasOnDoubleClick=function(a){a.preventDefault&&a.preventDefault();this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseDoubleClick)}.bind(this);this.__canvasEl.addEventListener("mousedown",this.__canvasOnMouseDown);this.__canvasEl.addEventListener("mousemove",this.__canvasOnMouseMove);this.__canvasEl.addEventListener("wheel",this.__canvasOnWheel);this.__canvasEl.addEventListener("touchstart",this.__canvasOnTouchStart);this.__canvasEl.addEventListener("touchmove",this.__canvasOnTouchMove);this.__canvasEl.addEventListener("touchend",this.__canvasOnTouchEnd);this.__canvasEl.addEventListener("touchcancel",this.__canvasOnTouchEnd);this.__canvasEl.addEventListener("dblclick",this.__canvasOnDoubleClick);this.__canvasOnContextMenu=function(a){a.preventDefault()}.bind(this);this.__canvasEl.addEventListener("contextmenu",this.__canvasOnContextMenu);this.__documentOnKeyDown=function(a){this.__altKeyDown=a.altKey;this.__ctrlKeyDown=a.ctrlKey;this.__shiftKeyDown=a.shiftKey}.bind(this);this.__documentOnKeyUp=function(a){this.__altKeyDown=a.altKey;this.__ctrlKeyDown=a.ctrlKey;this.__shiftKeyDown=a.shiftKey}.bind(this);this.__documentObj.addEventListener("keydown",this.__documentOnKeyDown,!0);this.__documentObj.addEventListener("keyup",this.__documentOnKeyUp,!0);this.__canvasOnMouseOver=function(a){a.preventDefault&&a.preventDefault();this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseOver)}.bind(this);this.__canvasOnMouseOut=function(a){a.preventDefault&&a.preventDefault();this._updateMousePosition(a);this._callMouseHandler(this.__callbackMouseOut)}.bind(this);this.__canvasEl.addEventListener("mouseover",this.__canvasOnMouseOver);this.__canvasEl.addEventListener("mouseout",this.__canvasOnMouseOut)}f.prototype.cleanUp=function(){this.__canvasEl.removeEventListener("mousedown",this.__canvasOnMouseDown);this.__canvasEl.removeEventListener("mousemove",this.__canvasOnMouseMove);this.__canvasEl.removeEventListener("wheel",this.__canvasOnWheel);this.__canvasEl.removeEventListener("touchstart",this.__canvasOnTouchStart);this.__canvasEl.removeEventListener("touchmove",this.__canvasOnTouchMove);this.__canvasEl.removeEventListener("touchend",this.__canvasOnTouchEnd);this.__canvasEl.removeEventListener("touchcancel",this.__canvasOnTouchEnd);this.__documentObj.removeEventListener("mouseup",this.__documentOnMouseUp,!0);this.__documentObj.removeEventListener("mousemove",this.__documentOnMouseMove,!0);this.__canvasEl.removeEventListener("contextmenu",this.__canvasOnContextMenu);this.__documentObj.removeEventListener("keydown",this.__documentOnKeyDown,!0);this.__documentObj.removeEventListener("keyup",this.__documentOnKeyUp,!0);this.__canvasEl.removeEventListener("mouseover",this.__canvasOnMouseOver);this.__canvasEl.removeEventListener("mouseout",this.__canvasOnMouseOut);this.__canvasEl.removeEventListener("dblclick",this.__canvasOnDoubleClick)};f.prototype.onDelete=function(){this.cleanUp()};f.prototype._updateMousePosition=function(b){this.__lastMousePos[0]=this.__currentMousePos[0];this.__lastMousePos[1]=this.__currentMousePos[1];var a=this.__canvasEl.getBoundingClientRect();this.__currentMousePos[0]=b.pageX-(a.left+this.__windowObj.scrollX);this.__currentMousePos[1]=b.pageY-(a.top+this.__windowObj.scrollY);this.__mouseDelta=[this.__currentMousePos[0]-this.__lastMousePos[0],this.__currentMousePos[1]-this.__lastMousePos[1]]};f.prototype._callMouseHandler=function(b){b&&b({mouseDown:this.__isMouseDown,mousePosition:this.__currentMousePos,mouseDelta:this.__mouseDelta,mouseButton:this.__mouseButton,altKey:this.__altKeyDown,ctrlKey:this.__ctrlKeyDown,shiftKey:this.__shiftKeyDown})};f.prototype.setCallbackMouseUp=function(b){this.__callbackMouseUp=b};f.prototype.setCallbackMouseDown=function(b){this.__callbackMouseDown=b};f.prototype.setCallbackMouseMove=function(b){this.__callbackMouseMove=b};f.prototype.setCallbackMouseDrag=function(b){this.__callbackMouseDrag=b};f.prototype.setCallbackMouseWheel=function(b){this.__callbackMouseWheel=b};f.prototype.setCallbackMouseOver=function(b){this.__callbackMouseOver=b};f.prototype.setCallbackMouseOut=function(b){this.__callbackMouseOut=b};f.prototype.setCallbackMouseDoubleClick=function(b){this.__callbackMouseDoubleClick=b};return q.Deletable(f)}({Deletable:d}),g=function(q){return q.Emscripten.Canvas.extend("DOMCanvas",{__construct:function(f,b){void 0===b&&(b=1,console.warn('Parameter "scaleHDPi" on DOMCanvas constructor needs to be a float and undefined was passed. Examples of values: 1.0 = normal CSS screen resolution, 2.0 = native display resolution. Defaulting to 1.0'));this.__parent.__construct.call(this,[f.width,f.height],b);this.element=f;this.y=this.x=0},__destruct:function(){this.__parent.__destruct.call(this)},resize:function(f,b){this.element.width=f;this.element.height=b;this.setSize([f,b])}})}({Emscripten:c["emscripten!northstar_api.min.js"]}),h=function(q){q.Emscripten.internalSetNorthstarVersion("v2.124.1-gl");return{}}({Emscripten:c["emscripten!northstar_api.min.js"]}),r=function(q){var f=q.Emscripten,b=f.NetworkRequest.extend("XHRNetworkRequst",{__construct:function(a){this.xhr=a;this.__parent.__construct.call(this)},abort:function(){this.xhr.abort("Aborted")},fail:function(a){this.error=a;this.xhr.abort(a.asString())}});return f.Network.extend("XHRNetwork",{timeoutSec:120,__construct:function(a){this.xhrFactory=a||XMLHttpRequest;this.__parent.__construct.call(this)},setTimeout:function(a){this.timeoutSec=a},GET:function(a,m,n,l){var k=new this.xhrFactory;k.open("GET",m,!0);k.responseType="arraybuffer";for(var t in n)k.setRequestHeader(t,n[t]);n=new b(k).deleteLater();k.withCredentials=!1;!0===a.withCredentials&&(k.withCredentials=!0);l=l.clone();var u=m.toString();k.onload=function(){var p=new f.HeaderSet(k.getAllResponseHeaders()).deleteLater();p=new f.NetworkResponse(k.status,p,k.response,u).deleteLater();l.onLoad(p);l.delete()};k.onreadystatechange=function(){if(this.readyState===this.HEADERS_RECEIVED)l.onHeadersReceived();else if(this.readyState===this.LOADING)l.onProgress()};k.onprogress=function(){l.onProgress()};k.ontimeout=function(){var p=f.NetworkError.makeTimeout(u).deleteLater();l.onError(p);l.delete()};k.onabort=function(){var p=f.NetworkError.makeAborted(u,"XHR Aborted").deleteLater();l.onError(p);l.delete()};k.onerror=function(){var p=f.NetworkError.makeHttpError(u,k.status).deleteLater();l.onError(p);l.delete()};k.timeout=1e3*this.timeoutSec;k.send(null);a.priority&&a.priority.delete();return n}})}({Emscripten:c["emscripten!northstar_api.min.js"]}),v=function(q){function f(b){b=b||{};var a=b.windowObj||window,m=b.documentObj||document,n=IMVU.requireProperty(b,"canvasElement");this.__session3dAggregate=IMVU.requireProperty(b,"session3dAggregate").clone();this.__scaleHDPi=b.scaleHDPi||1;this.__tapDistanceThreshold=IMVU.optionalProperty(b,"tapDistanceThreshold",8);this.__scrollLinePixelHeight=IMVU.optionalProperty(b,"scrollLinePixelHeight",16);this.__currentGestureType=this.__currentGestureStartCoords=null;this.__canvasInputAdapter=new q.CanvasInputAdapter({canvas:n,documentObj:m,windowObj:a});this.__canvasInputAdapter.setCallbackMouseDown(this.__callbackMouseDown.bind(this));this.__canvasInputAdapter.setCallbackMouseUp(this.__callbackMouseUp.bind(this));this.__canvasInputAdapter.setCallbackMouseMove(this.__callbackMouseMove.bind(this));this.__canvasInputAdapter.setCallbackMouseDrag(this.__callbackMouseDrag.bind(this));this.__canvasInputAdapter.setCallbackMouseWheel(this.__callbackMouseWheel.bind(this));this.__canvasInputAdapter.setCallbackMouseDoubleClick(this.__callbackMouseDoubleClick.bind(this))}f.prototype.onDelete=function(){this.__session3dAggregate.delete();this.__canvasInputAdapter.delete()};f.prototype.__callbackMouseUp=function(b){var a={x:b.mousePosition[0]*this.__scaleHDPi,y:b.mousePosition[1]*this.__scaleHDPi};b=b.mouseButton?b.mouseButton-1:0;this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureTouchLeaveAtRasterCoordinates(a,b);"click_or_drag"===this.__currentGestureType&&(this.__currentGestureType=null,this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureTapAtRasterCoordinates(a,b))};f.prototype.__callbackMouseDown=function(b){var a={x:b.mousePosition[0]*this.__scaleHDPi,y:b.mousePosition[1]*this.__scaleHDPi};b=b.mouseButton?b.mouseButton-1:0;this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureTouchEnterAtRasterCoordinates(a,b);this.__currentGestureStartCoords=a;this.__currentGestureType="click_or_drag"};f.prototype.__callbackMouseMove=function(b){var a={x:b.mousePosition[0]*this.__scaleHDPi,y:b.mousePosition[1]*this.__scaleHDPi};b={x:b.mouseDelta[0]*this.__scaleHDPi,y:b.mouseDelta[1]*this.__scaleHDPi};this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureMoveToRasterCoordinates(a,b,{x:0,y:0},0)};f.prototype.__callbackMouseDrag=function(b){var a=b.mousePosition[0]*this.__scaleHDPi,m=b.mousePosition[1]*this.__scaleHDPi,n=b.mouseDelta[0]*this.__scaleHDPi,l=b.mouseDelta[1]*this.__scaleHDPi,k={x:a,y:m},t=this.__currentGestureType;if("click_or_drag"===this.__currentGestureType){var u=k.x-this.__currentGestureStartCoords.x,p=k.y-this.__currentGestureStartCoords.y;Math.sqrt(u*u+p*p)>this.__tapDistanceThreshold&&(this.__currentGestureType="drag")}"drag"===this.__currentGestureType&&(a="click_or_drag"===t?{x:a-this.__currentGestureStartCoords.x,y:m-this.__currentGestureStartCoords.y}:{x:n,y:l},m=0,3===b.mouseButton&&(m=1),2===b.mouseButton&&(m=2),this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureDragToRasterCoordinates(k,a,{x:0,y:0},m))};f.prototype.__callbackMouseWheel=function(b){var a;b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?a=b.deltaY:b.deltaMode===WheelEvent.DOM_DELTA_LINE?a=b.deltaY*this.__scrollLinePixelHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a=16*b.deltaY);b=Math.pow(1.2,-a/100);this.__session3dAggregate.getCurrentPolicy().deleteLater().handleGestureZoomByScaleChange(b)};f.prototype.setCallbackMouseDoubleClick=function(b){this.__handleDoubleClick=b};f.prototype.__callbackMouseDoubleClick=function(b){var a={x:b.mousePosition[0]*this.__scaleHDPi,y:b.mousePosition[1]*this.__scaleHDPi};b=b.mouseButton?b.mouseButton-1:0;this.__handleDoubleClick&&this.__handleDoubleClick(a,b)};return q.Deletable(f)}({CanvasInputAdapter:e,Deletable:d});c={CanvasInputAdapter:e,Deletable:d,DOMCanvas:g,Emscripten:c["emscripten!northstar_api.min.js"],Version:h,XHRNetwork:r,CanvasGestureAdapter:v};d=c.Emscripten;for(var w in c)"Emscripten"!==w&&"Version"!==w&&(d[w]=c[w]);return d});