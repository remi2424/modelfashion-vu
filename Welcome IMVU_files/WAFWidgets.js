module({"@UiCore":"@UiCore","@Dialogs":"@Dialogs","@NextUtil":"@NextUtil","@moment":"@moment","@Model":"@Model","css!/build/waf/WAFWidgets.css":"css!/asset/00d6104961680e37/build/waf/WAFWidgets.css"},function(n){var z=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){return'<div class="dual-name-icon"></div><div class="dual-name-names"></div>'},useData:!0})}({}),x=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=this.escapeExpression;return'<div class="at-avatar-name-at">@</div><div class="at-avatar-name-text is-truncated">'+b((e=a.atAvatarName||c&&c.atAvatarName,"function"===typeof e?e.call(c,{name:"atAvatarName",hash:{},data:d}):e))+"</div>"},useData:!0})}({});x=function(g){var c=g.UiCore.UiContext;return c.extend("AtAvatarName",{className:"at-avatar-name enable-text-selection",uiContextName:"at_avatar_name",dependencies:"dialogManager featureAccessManager globalStringManager loginManager modeManager Promise user window".split(" "),trackedEvents:function(){return[{type:"click",selector:".at-avatar-name-text",name:"avatar_name_lhs_click",handler:this.__onClickInner.bind(this),allowBubble:!0}]},__stripGuest:function(a){g.NextUtil.string.startsWith(a,"Guest_")&&(a=a.substring(6));return a},initialize:function(a){var b=this;c.prototype.initialize.call(this,a);this.__window=a.window;this.__modeManager=a.modeManager;this.__serviceProvider=a.serviceProvider;this.__stringManager=a.globalStringManager;this.__featureAccessManager=a.featureAccessManager;this.__user=this.track(a.user);this.__loginManager=a.loginManager;this.__showErrorView=!!a.showErrorView;this.__ignoreClicks="undefined"!==typeof a.ignoreClicks?!!a.ignoreClicks:!this.__loginManager.isLoggedIn();this.__chatScene=a.chatScene;this.__isLoggedIn=this.__loginManager.isLoggedIn();this.__ignoreClicks&&this.$el.addClass("ignore-clicks");this.__shouldRemoveTruncate=!1;this.__shouldWrap=IMVU.optionalProperty(a,"shouldWrap",!1);this.__hoverOn=IMVU.optionalProperty(a,"hoverOn",!1);this.__size=IMVU.optionalProperty(a,"size","small");this.__color=IMVU.optionalProperty(a,"color","dark");this.__display=IMVU.optionalProperty(a,"display",null);this.__width=IMVU.optionalProperty(a,"width",null);this.__shouldRemoveTruncate&&(this.__shouldWrap=!0);this.__shouldWrap&&(this.__shouldRemoveTruncate=!0);this.addToDOM();this.doWork([function(){b.$(".at-avatar-name-text").change(function(){try{var e=this.__stripGuest(this.$(".at-avatar-name-text").text());g.NextUtil.string.startsWith(e,"@")||this.$(".at-avatar-name-text").text("@".text)}catch(k){this.__showErrorView&&(this.__ignoreClicks=!0,this.$(".at_avatar_name-text").text("..."),this.$el.addClass("ignore-clicks"))}}.bind(b));var d="change:"+b.__getUsernameKey();b.listenTo(b.__user,d,g.NextUtil.mirrorModelChange(".at-avatar-name-text"))}])},__getUsernameKey:function(){return-1!==this.__user.id.indexOf("profile-")?"avatar_name":"username"},__getUser:function(){return new this.__Promise(function(a){var b=this.__user;-1!==this.__user.id.indexOf("profile-")&&(b=this.__user.getSingleEdge("restgraph_entity"));a.resolve(b)}.bind(this))},assignSize:function(a){"undefined"!==typeof a&&(this.__size=a);this.$el.removeClass("an-s-tiny");this.$el.removeClass("an-s-small");this.$el.removeClass("an-s-medium");this.$el.removeClass("an-s-large");this.$el.removeClass("an-s-big");switch(this.__size){case"tiny":case"small":case"medium":case"large":case"big":this.$el.addClass("an-s-"+this.__size)}},assignColor:function(a){"undefined"!==typeof a&&(this.__color=a);this.$el.removeClass("an-fc-white");this.$el.removeClass("an-fc-light-gray");this.$el.removeClass("an-fc-dark-gray");switch(this.__color){case"light":this.$el.addClass("an-fc-white");break;case"medium":this.$el.addClass("an-fc-light-gray");break;case"dark":this.$el.addClass("an-fc-dark-gray")}},assignDisplay:function(a){"undefined"!==typeof a&&(this.__display=a);this.$el.removeClass("an-d-inline");this.$el.removeClass("an-d-inline-block");this.$el.removeClass("an-d-block");this.$el.removeClass("an-d-flex");this.$el.removeClass("an-d-hidden");switch(this.__display){case"inline":this.$el.addClass("an-d-inline");break;case"inline-block":this.$el.addClass("an-d-inline-block");break;case"block":this.$el.addClass("an-d-block");break;case"flex":this.$el.addClass("an-d-flex");break;case"hidden":this.$el.addClass("an-d-hidden")}},render:function(){var a=this;this.doWork([function(){a.$el.html(g.template);a.assignSize();a.assignColor();a.assignDisplay();return a.__user.populated()},function(){try{var b=a.__stripGuest(a.__user.get(a.__getUsernameKey()));a.$el.html(g.template({atAvatarName:b}))}catch(d){return a.__setAsRenderFailed(),a.__Promise.reject()}a.__setAsRendered();return a.__Promise.resolve()}]).catch(function(){a.__showErrorView&&(a.__ignoreClicks=!0,a.$el.html("...").addClass("ignore-clicks"));a.__setAsRenderFailed()})},__onClickInner:function(a){this.__ignoreClicks||(this.__getUser().then(function(b){this.__isLoggedIn?(this.__chatScene&&this.__chatScene.getCurrentPolicyChat().focusOnAvatar(b.get("legacy_cid").toString(),!0),this.__dialogManager.showLightbox("ProfileLightbox",{user:b,chatScene:this.__chatScene})):this.__modeManager.openMode({mode:{id:"profile"},submode:{id:b.get("id")}})}.bind(this)),a.stopPropagation())},__addHovering:function(){this.$el.addClass("hovering")},__removeHovering:function(){this.$el.removeClass("hovering")}})}({NextUtil:n["@NextUtil"],UiCore:n["@UiCore"],template:x});var y=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){return'\n<div class="whisper-you-to hidden">You to</div>\n'},3:function(c,a,b,d){return'\n<div class="whisper-to-me hidden">to me</div>\n'},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=this.escapeExpression;var k="",f=a["if"].call(c,c&&c.outgoingWhisper,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d});if(f||0===f)k+=f;k+='\n<div class="display-name-text is-truncated">'+b((e=a.displayName||c&&c.displayName,"function"===typeof e?e.call(c,{name:"displayName",hash:{},data:d}):e))+'</div>\n<div class="display-name-badges"></div>\n';if((f=a["if"].call(c,c&&c.incomingWhisper,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}))||0===f)k+=f;return k},useData:!0})}({}),u=function(g){var c=g.Dialogs.AlloyModalDialog;return c.extend("TooltipDialog",{uiContextName:"tooltip_dialog",className:"tooltip-dialog dialog-type-B text-close",trackedEvents:function(){return this.__customTrackedEvents},initialize:function(a){this.__customTrackedEvents=a.trackedEvents||[];c.prototype.initialize.call(this,a);this.title=a.title;this.__tooltipContent=a.tooltipContent;this.addToDOM()},postRender:function(){this.setContent("body",this.__tooltipContent)}})}({Dialogs:n["@Dialogs"]});u=function(g){var c=g.UiCore.UiContext;return c.extend("Tooltip",{className:"tooltip",uiContextName:"tooltip",dependencies:["dialogManager","timer","tooltipLayer","window"],trackedEvents:function(){return[{type:"click",selector:"a",name:"link_click",handler:"__clickedLink",allowBubble:!0}].concat(this.__customTrackedEvents)},__installTooltipLayerEventHandlers:function(){this.__tooltipLayer.$el.on("mouseenter.tooltip",".tooltip",function(){this.__timer.clearTimeout(this.__targetTimeout);this.__timer.clearTimeout(this.__tooltipTimeout);this.$target.off("mouseleave.tooltip")}.bind(this));this.__tooltipLayer.$el.on("mouseleave.tooltip",".tooltip",function(){this.__timer.clearTimeout(this.__tooltipTimeout);this.__tooltipTimeout=this.__timer.setTimeout(function(){this.setVisible(!1);this.__timer.clearTimeout(this.__tooltipTimeout);this.__tooltipTimeout=this.__timer.setTimeout(function(){this.__hide();this.__installTargetMouseleave()}.bind(this),125)}.bind(this),250)}.bind(this))},__removeTooltipLayerEventHandlers:function(){this.__tooltipLayer.$el.off(".tooltip")},initialize:function(a){this.$tooltip=IMVU.requireProperty(a,"$replaceElement");this.$target=IMVU.requireProperty(a,"$tooltipTarget");this.tooltipTitle=IMVU.optionalProperty(a,"title",!1);this.__tooltipStyle=IMVU.optionalProperty(a,"tooltipStyle","default");this.__tooltipPosition=IMVU.optionalProperty(a,"tooltipPosition","default");this.__positionDelta=IMVU.optionalProperty(a,"positionDelta",0);this.__forceTargetToUseOuterWidth=IMVU.optionalProperty(a,"forceTargetToUseOuterWidth",!1);this.__customTrackedEvents=a.trackedEvents||[];c.prototype.initialize.call(this,a);this.$body=$("body");this.$globalNav=$("nav.global-nav:visible");if("mobile"===this.__serviceProvider.get("platform"))this.$target.on("click.tooltip",function(b){b.stopPropagation();this.__openTooltipDialog()}.bind(this));else this.$target.on("mouseenter.tooltip",function(){this.__timer.clearTimeout(this.__targetTimeout);this.__timer.clearTimeout(this.__tooltipTimeout);this.__timer.clearTimeout(this.__targetFadeinTimeout);this.__installTargetMouseleave();this.__targetFadeinTimeout=this.__timer.setTimeout(function(){this.setVisible(!0);this.__show()}.bind(this),250)}.bind(this));"snug"===this.__tooltipStyle&&this.$el.addClass("tooltip-snug");this.$el.append(this.$tooltip);this.setParentUiContext(this.__tooltipLayer);this.__tooltipLayer.$el.append(this.$el);this.__setAsRendered()},setVisible:function(a){this.$el.toggleClass("tooltip-open",!!a)},__installTargetMouseleave:function(){this.$target.on("mouseleave.tooltip",function(){this.__timer.clearTimeout(this.__targetTimeout);this.__targetTimeout=this.__timer.setTimeout(function(){this.setVisible(!1);this.__timer.clearTimeout(this.__targetTimeout);this.__targetTimeout=this.__timer.setTimeout(function(){this.__hide()}.bind(this),125)}.bind(this),250)}.bind(this))},__show:function(){this.__installTooltipLayerEventHandlers();this.__trackTooltip();$(this.__window).on("scroll.tooltip",function(){this.__trackTooltip()}.bind(this));this.$body.find(".transparent-overlay").on("scroll.tooltip",function(){this.__trackTooltip()}.bind(this))},trackTooltip:function(){this.__trackTooltip()},__trackTooltip:function(){var a=this.$globalNav.height()||0,b=this.$target[0].getBoundingClientRect().top,d=this.$target[0].getBoundingClientRect().left,e=$(window).width()-(d+this.$target.outerWidth()/2),k=this.$el[0].offsetWidth;0<this.$target.parents(".dialog-manager").length&&(a=0);var f=this.$target.width();this.__forceTargetToUseOuterWidth&&(f=this.$target.outerWidth());e=e>k?d+f/2:d+f/2-k;"bottom"===this.__tooltipPosition?(e=d-this.$tooltip.outerWidth()/2,b=this.$target[0].getBoundingClientRect().bottom-this.__positionDelta):"above"===this.__tooltipPosition?(e=d+f/2-k,b=this.$target[0].getBoundingClientRect().top-this.$el[0].offsetHeight):"left"===this.__tooltipPosition?(e=d-f-k-this.__positionDelta,b=this.$target[0].getBoundingClientRect().top):"bottom-left-edge"===this.__tooltipPosition&&(e=d,b=0);this.$el.css({"margin-top":Math.max(b,a),"margin-left":e})},__hide:function(){this.__removeTooltipLayerEventHandlers();this.setVisible(!1)},__openTooltipDialog:function(){return this.__dialogManager.showDialog(g.TooltipDialog,{title:this.tooltipTitle||this.$target.text(),tooltipContent:this.$tooltip.html(),trackedEvents:this.__customTrackedEvents})},delete:function(){this.$el.removeAttr("style");this.__timer.clearTimeout(this.__targetFadeinTimeout);this.__timer.clearTimeout(this.__targetTimeout);this.__timer.clearTimeout(this.__tooltipTimeout);this.$target.off(".tooltip");this.__removeTooltipLayerEventHandlers();$(this.__window).off("scroll.tooltip");this.$body.find(".transparent-overlay").off("scroll.tooltip");c.prototype.delete.call(this)},__clickedLink:function(a){this.__hide()}})}({UiCore:n["@UiCore"],TooltipDialog:u});var r=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){return"is-pro"},3:function(c,a,b,d){return'\n        <svg class="badge-image" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 19 19">\n            <path fill="#E1E1E1" d="M9.735 9.679l5.174-2.964s.096.049.09.221c-.003.139-.001 3.804 0 5.209a.946.946 0 01-.468.817l-.44.257-.534.312-.594.347-.619.36-.612.356-.572.33-.496.281c-.128.072-.257.146-.387.216l-.125.068c-.085.045-.16.088-.257.1-.051.008-.104.015-.156.018L9.735 9.68z"/>\n            <path fill="#fff" d="M9.507 9.273L4.335 6.308s-.006-.106.147-.189c.123-.066 3.322-1.9 4.549-2.602a.957.957 0 01.947-.006c.148.083.297.166.443.25l.54.302c.199.113.4.224.6.337.207.117.415.236.624.353l.615.348c.19.108.382.217.572.327l.495.285c.128.074.255.15.381.225l.122.073c.083.05.155.094.215.171.031.041.063.08.094.124L9.507 9.273z"/>\n            <path fill="#F4F4F4" d="M9.29 9.666l.005 5.927s-.09.057-.237-.032c-.12-.072-3.322-1.9-4.55-2.6a.95.95 0 01-.479-.813l-.005-.506-.006-.614-.005-.683-.006-.713c-.002-.235-.003-.469-.003-.704C4.002 8.71 4 8.492 4 8.273c0-.189 0-.38.002-.568 0-.147.002-.294.005-.44 0-.047.002-.093.004-.14.003-.097.002-.181.04-.271l.061-.142L9.29 9.666z"/>\n        </svg>\n    '},5:function(c,a,b,d){return'\n        <svg class="badge-image" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 19 19">\n            <path fill="#DCC0FF" d="M9.735 9.679l5.174-2.964s.096.049.09.221c-.003.139-.001 3.804 0 5.209a.946.946 0 01-.468.817l-.44.257-.534.312-.594.347-.619.36-.612.356-.572.33-.496.281c-.128.072-.257.146-.387.216l-.125.068c-.085.045-.16.088-.257.1-.051.008-.104.015-.156.018L9.735 9.68z"/>\n            <path fill="#FEFCFF" d="M9.507 9.273L4.335 6.308s-.006-.106.147-.189c.123-.066 3.322-1.9 4.549-2.602a.957.957 0 01.947-.006c.148.083.297.166.443.25l.54.302c.199.113.4.224.6.337.207.117.415.236.624.353l.615.348c.19.108.382.217.572.327l.495.285c.128.074.255.15.381.225l.122.073c.083.05.155.094.215.171.031.041.063.08.094.124L9.507 9.273z"/>\n            <path fill="#F6EBFF" d="M9.29 9.666l.005 5.927s-.09.057-.237-.032c-.12-.072-3.322-1.9-4.55-2.6a.95.95 0 01-.479-.813l-.005-.506-.006-.614-.005-.683-.006-.713c-.002-.235-.003-.469-.003-.704C4.002 8.71 4 8.492 4 8.273c0-.189 0-.38.002-.568 0-.147.002-.294.005-.44 0-.047.002-.093.004-.14.003-.097.002-.181.04-.271l.061-.142L9.29 9.666z"/>\n        </svg>\n    '},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){b='<div class="display-name-badge creator-badge ';var e=a["if"].call(c,c&&c.is_pro,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d});if(e||0===e)b+=e;b+='">\n    ';if((e=a["if"].call(c,c&&c.is_pro,{name:"if",hash:{},fn:this.program(3,d),inverse:this.program(5,d),data:d}))||0===e)b+=e;return b+"\n</div>"},useData:!0})}({}),v=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=a.helperMissing;b='<div class="creator-badge-tooltip tooltip-header"><a class="creator-badge-tooltip-cta cta">';if((a=(e=a["i18n-g"]||c&&c["i18n-g"]||k,e.call(c,"Creator",{name:"i18n-g",hash:{},data:d})))||0===a)b+=a;return b+"</a></div>"},useData:!0})}({}),p=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){return' <div class="display-name-badge host-badge">\n    <svg class="badge-image" width="12" height="12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect x=".68" y=".68" width="10.64" height="10.64" rx="5.32" fill="#F4511E" fill-opacity=".9"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M4.487 3.34v3.724h.642v-1.57H6.87v1.57h.642V3.34H6.87v1.548H5.129V3.34h-.642zm4.469 4.61H3.044v.71h5.912v-.71z" fill="#fff"/>\n    </svg>\n</div>'},useData:!0})}({}),q=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=a.helperMissing;b='<div class="vip-badge-tooltip tooltip-header"><a class="vip-badge-tooltip-cta cta">';if((a=(e=a["i18n-g"]||c&&c["i18n-g"]||k,e.call(c,"VIP Member",{name:"i18n-g",hash:{},data:d})))||0===a)b+=a;return b+"</a></div>"},useData:!0})}({}),w=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){return'\n    <svg class="badge-image" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n        <g fill="none" fill-rule="evenodd">\n        <ellipse fill="#DEB359" cx="9" cy="9" rx="9" ry="9"/>\n        <path d="M14.87 7.303a.723.723 0 1 0-1.247.497l-2.027 1.992a.138.138 0 0 1-.222-.042L9.407 5.283a.72.72 0 0 0-.39-1.33.723.723 0 0 0-.394 1.33L6.656 9.75a.138.138 0 0 1-.222.042L4.39 7.784a.72.72 0 0 0-.537-1.204.72.72 0 1 0-.073 1.44c.114.95.633 5.27.646 5.286.18.414 2.163.74 4.59.74 2.426 0 4.41-.326 4.59-.74.01-.017.53-4.346.644-5.29a.72.72 0 0 0 .62-.713" fill="#FFF"/>\n        </g>\n    </svg>\n    '},3:function(c,a,b,d){var e;b=a.helperMissing;return(a=(e=a.icon||c&&c.icon||b,e.call(c,"icon-vip_badge_small_level_1",{name:"icon",hash:{class:"badge-image"},data:d})))||0===a?a:""},5:function(c,a,b,d){var e;b=a.helperMissing;return(a=(e=a.icon||c&&c.icon||b,e.call(c,"icon-vip_badge_small_level_2",{name:"icon",hash:{class:"badge-image"},data:d})))||0===a?a:""},7:function(c,a,b,d){var e;b=a.helperMissing;return(a=(e=a.icon||c&&c.icon||b,e.call(c,"icon-vip_badge_small_level_3",{name:"icon",hash:{class:"badge-image"},data:d})))||0===a?a:""},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){b=' <div class="display-name-badge vip-badge">\n    ';var e=a["if"].call(c,c&&c.vip,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d});if(e||0===e)b+=e;b+="\n    ";if((e=a["if"].call(c,c&&c.vip_tier_1,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}))||0===e)b+=e;b+="\n    ";if((e=a["if"].call(c,c&&c.vip_tier_2,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}))||0===e)b+=e;b+="\n    ";if((e=a["if"].call(c,c&&c.vip_tier_3,{name:"if",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}))||0===e)b+=e;return b+"\n</div>"},useData:!0})}({});y=function(g){var c=g.UiCore.UiContext;return c.extend("DisplayName",{className:"display-name enable-text-selection",uiContextName:"display_name",dependencies:"dialogManager featureAccessManager globalStringManager loginManager modeManager Promise user window".split(" "),trackedEvents:function(){return[{type:"click",selector:".display-name-text",name:"display_name_lhs_click",handler:this.__onClickInner.bind(this),allowBubble:!0}]},initialize:function(a){var b=this;c.prototype.initialize.call(this,a);this.__window=a.window;this.__modeManager=a.modeManager;this.__serviceProvider=a.serviceProvider;this.__stringManager=a.globalStringManager;this.__user=this.track(a.user,["online"],900);this.__loginManager=a.loginManager;this.__showErrorView=!!a.showErrorView;this.__ignoreClicks="undefined"!==typeof a.ignoreClicks?!!a.ignoreClicks:!this.__loginManager.isLoggedIn();this.__isLoggedIn=this.__loginManager.isLoggedIn();this.__ignoreClicks&&this.$el.addClass("ignore-clicks");this.__showHostBadge=IMVU.optionalProperty(a,"showHostBadge",!1);this.__isIncomingWhisper=IMVU.optionalProperty(a,"isIncomingWhisper",!1);this.__isOutgoingWhisper=IMVU.optionalProperty(a,"isOutgoingWhisper",!1);this.__showVipBadge=IMVU.optionalProperty(a,"showVipBadge",!0);this.__showVipBadgeTooltip=IMVU.optionalProperty(a,"showVipBadgeTooltip",!0);this.__showCreatorBadgeTooltip=IMVU.optionalProperty(a,"showCreatorBadgeTooltip",!1);this.__showVipBadge||(this.__showVipBadgeTooltip=!1);this.__showVipBadgeTooltip&&(this.__showVipBadge=!0);this.__shouldRemoveTruncate=IMVU.optionalProperty(a,"shouldRemoveTruncate",!1);this.__showAsMe=IMVU.optionalProperty(a,"showAsMe",!1);this.__nameOverride=IMVU.optionalProperty(a,"nameOverride",null);this.__hoverOn=IMVU.optionalProperty(a,"hoverOn",!1);this.__size=IMVU.optionalProperty(a,"size","small");this.__color=IMVU.optionalProperty(a,"color","dark");this.__display=IMVU.optionalProperty(a,"display",null);this.__prefix=IMVU.optionalProperty(a,"prefix",null);this.__suffix=IMVU.optionalProperty(a,"suffix",null);this.__width=IMVU.optionalProperty(a,"width",null);this.__lineHeightMatch=IMVU.optionalProperty(a,"lineHeightMatch",!1);this.__chatScene=a.chatScene;null!==this.__nameOverride&&(this.__showAsMe=this.__showCreatorBadgeTooltip=this.__showVipBadgeTooltip=this.__showVipBadge=this.__showHostBadge=!1,this.__ignoreClicks=!0);"string"===typeof this.__suffix&&""!==this.__suffix&&(this.__showCreatorBadgeTooltip=this.__showVipBadgeTooltip=this.__showVipBadge=this.__showHostBadge=!1);this.__allowClickProp=a.allowClickProp;!1===this.__ignoreClicks&&(this.__allowClickProp=!1);this.addToDOM();this.doWork([function(){var d="change:"+b.__getDisplayNameKey();b.listenTo(b.__user,d,g.NextUtil.mirrorModelChange(".display-name-text"))}])},__getDisplayNameKey:function(){return-1!==this.__user.id.indexOf("profile-")?"title":"display_name"},__getUser:function(){return new this.__Promise(function(a){var b=this.__user;-1!==this.__user.id.indexOf("profile-")&&(b=this.__user.getSingleEdge("restgraph_entity"));a.resolve(b)}.bind(this))},__getBadgeFromLocalStorage:function(a){var b=localStorage.getItem(a);if(!b)return!1;b=JSON.parse(b);return(new Date).getTime()>b.expiry?(localStorage.removeItem(a),!1):b.value},assignNameOverride:function(a){"undefined"!==typeof a&&(this.__nameOverride=a);this.$(".display-name-text").text(this.__nameOverride)},assignSize:function(a){"undefined"!==typeof a&&(this.__size=a);this.$el.removeClass("dn-s-tiny");this.$el.removeClass("dn-s-small");this.$el.removeClass("dn-s-medium");this.$el.removeClass("dn-s-large");this.$el.removeClass("dn-s-big");switch(this.__size){case"tiny":case"small":case"medium":case"large":case"big":this.$el.addClass("dn-s-"+this.__size)}},assignColor:function(a){"undefined"!==typeof a&&(this.__color=a);this.$el.removeClass("dn-fc-white");this.$el.removeClass("dn-fc-light-gray");this.$el.removeClass("dn-fc-dark-gray");this.$el.removeClass("dn-fc-orange");switch(this.__color){case"light":this.$el.addClass("dn-fc-white");break;case"medium":this.$el.addClass("dn-fc-light-gray");break;case"medium-dark":this.$el.addClass("dn-fc-medium-dark-gray");break;case"dark":this.$el.addClass("dn-fc-dark-gray");break;case"orange":this.$el.addClass("dn-fc-orange")}},assignDisplay:function(a){"undefined"!==typeof a&&(this.__display=a);this.$el.removeClass("dn-d-inline");this.$el.removeClass("dn-d-inline-block");this.$el.removeClass("dn-d-block");this.$el.removeClass("dn-d-flex");this.$el.removeClass("dn-d-hidden");switch(this.__display){case"inline":this.$el.addClass("dn-d-inline");break;case"inline-block":this.$el.addClass("dn-d-inline-block");break;case"block":this.$el.addClass("dn-d-block");break;case"hidden":this.$el.addClass("dn-d-hidden");break;case"flex":this.$el.addClass("dn-d-flex")}},__showBadges:function(){return this.__showVipBadge||this.__showHostBadge},render:function(){var a=this;this.doWork([function(){null!==a.__nameOverride?a.$el.html(g.template({displayName:a.__nameOverride,incomingWhisper:a.__isIncomingWhisper,outgoingWhisper:a.__isOutgoingWhisper})):(a.$el.html(g.template),a.doWork([function(){return a.__user.populated()},function(){var d="";"string"===typeof a.__prefix&&""!==a.__prefix&&(d+=a.__prefix+" ");d=a.__showAsMe?d+a.__stringManager.get("You"):d+a.__user.get(a.__getDisplayNameKey());"string"===typeof a.__suffix&&""!==a.__suffix&&(d=d.trim(),d+=" "+a.__suffix);a.$el.html(g.template({displayName:d,incomingWhisper:a.__isIncomingWhisper,outgoingWhisper:a.__isOutgoingWhisper}));d=(a.__getBadgeFromLocalStorage("is_vip")||a.__user.get("is_vip"))&&a.__showVipBadge;var e=a.__user.get("is_creator")&&a.__isLoggedIn;switch(!0){case e:a.__addCreatorBadge();break;case a.__showHostBadge:a.$(".display-name-badges").append(g.templateHostBadge);break;case d:a.__addVipBadge()}a.__isIncomingWhisper&&a.$(".whisper-to-me").removeClass("hidden");a.__isOutgoingWhisper&&a.$(".whisper-you-to").removeClass("hidden");a.__setAsRendered()}]).catch(function(){a.__showErrorView?(a.__ignoreClicks=!0,a.$el.html("...").addClass("ignore-clicks")):(a.$el.html(g.template({displayName:a.__globalStringManager.get("Unavailable User"),incomingWhisper:a.__isIncomingWhisper,outgoingWhisper:a.__isOutgoingWhisper})),a.$(".display-name-text").addClass("disabled"))}));if(a.__shouldRemoveTruncate){var b=a.$(".display-name-text");b.removeClass("is-truncated");b.addClass("wrap-it")}a.assignSize();a.assignColor();a.assignDisplay();a.__showBadges()||a.$(".display-name-badges").addClass("display-name-badges-hidden")}])},__onClickInner:function(a){this.__ignoreClicks||(this.__getUser().then(function(b){this.__isLoggedIn?(this.__chatScene&&this.__chatScene.getCurrentPolicyChat().focusOnAvatar(b.get("legacy_cid").toString(),!0),this.__dialogManager.showLightbox("ProfileLightbox",{user:b,chatScene:this.__chatScene})):this.__modeManager.openMode({mode:{id:"profile"},submode:{id:b.get("id")}})}.bind(this)),this.__allowClickProp||a.stopPropagation())},__vipBadgeClick:function(){return this.__dialogManager.showMultiCartUpsellDialog({upsellProduct:"vip",vipTrigger:"vip_badge_display_name",contextual:!0})},__creatorBadgeClick:function(){this.__window.open("https://www.imvu.com/creatorlanding/explore/","_blank")},__addCreatorBadge:function(){var a=this;this.__creatorDetails=this.__user.getSingleEdge("creator_details");this.__creatorDetails.populated().then(function(){a.$(".display-name-badges").append(g.templateCreatorBadge({is_pro:a.__creatorDetails.get("is_pro")}));a.__showCreatorBadgeTooltip&&(a.$(".display-name-badges").append(g.templateCreatorBadgeToolTip),a.__tooltip=a.createChildContext(g.Tooltip,{$replaceElement:a.$(".creator-badge-tooltip"),$tooltipTarget:a.$(".creator-badge"),title:" ",tooltipStyle:"snug",trackedEvents:[{type:"click",selector:".creator-badge-tooltip-cta.cta",name:"creator_badge_tooltip_click",handler:a.__creatorBadgeClick.bind(a)}]}))})},__addVipBadge:function(){var a={};!0!==this.__user.get("has_legacy_vip")?a["vip_tier_"+this.__user.get("vip_tier")]=!0:a.vip=!0;this.$(".display-name-badges").append(g.templateVipBadge(a));this.__showVipBadgeTooltip&&(this.$(".display-name-badges").append(g.templateVipBadgeToolTip),this.__tooltip=this.createChildContext(g.Tooltip,{$replaceElement:this.$(".vip-badge-tooltip"),$tooltipTarget:this.$(".vip-badge"),title:" ",tooltipStyle:"snug",trackedEvents:[{type:"click",selector:".cta",name:"vip_badge_tooltip_click",handler:this.__vipBadgeClick.bind(this)}]}))},addHovering:function(){this.$el.addClass("hovering")},removeHovering:function(){this.$el.removeClass("hovering")}})}({NextUtil:n["@NextUtil"],UiCore:n["@UiCore"],Tooltip:u,template:y,templateCreatorBadge:r,templateCreatorBadgeToolTip:v,templateHostBadge:p,templateVipBadge:w,templateVipBadgeToolTip:q});r=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){var e;b="\n        ";if((a=(e=a.silhouetteHtml||c&&c.silhouetteHtml,"function"===typeof e?e.call(c,{name:"silhouetteHtml",hash:{},data:d}):e))||0===a)b+=a;return b+"\n    "},3:function(c,a,b,d){return'\n        <img src="/common/withme/img/loading_avatar.png">\n    '},5:function(c,a,b,d){var e;b=this.escapeExpression;return'\n            <div class="number-actor-mask"></div>\n            <div class="number-actor">'+b((e=a.numberOfActor||c&&c.numberOfActor,"function"===typeof e?e.call(c,{name:"numberOfActor",hash:{},data:d}):e))+"</div>\n    "},7:function(c,a,b,d){return'\n<div class="online-status"></div>\n'},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){b='<a class="profile-icon-image">\n    ';var e=a["if"].call(c,c&&c.showSilhouette,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d});if(e||0===e)b+=e;b+="\n    ";if((e=a["if"].call(c,c&&c.isMultipleActor,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}))||0===e)b+=e;b+="\n</a>\n";if((e=a["if"].call(c,c&&c.showOnlineStatus,{name:"if",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}))||0===e)b+=e;return b+"\n"},useData:!0})}({});p=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=a.helperMissing;b='<div class="bg-granite color-pumice">\n    ';if((a=(e=a.icon||c&&c.icon||k,e.call(c,"icon-avatar_default_150x150",{name:"icon",hash:{},data:d})))||0===a)b+=a;return b+"\n</div>\n"},useData:!0})}({});r=function(g){var c=g.UiCore.UiContext,a=/\/s\d+x\d+\//;return c.extend("ProfileIcon",{className:"profile-icon new-profile-icon",uiContextName:"profile_icon",dependencies:"dialogManager featureAccessManager globalStringManager imageManager loginManager modeManager window".split(" "),trackedEvents:function(){return[{type:"click",selector:"",name:"profile_icon_click",handler:this.__onClick.bind(this),allowBubble:!0}]},initialize:function(b){var d=this;c.prototype.initialize.call(this,b);this.__feedType=b.feedType;this.__openContext=b.openContext;this.__isLoggedIn=this.__loginManager.isLoggedIn();this.__activeChat=IMVU.optionalProperty(b,"activeChat",null);this.__ignoreClicks="undefined"!==typeof b.ignoreClicks?!!b.ignoreClicks:!this.__loginManager.isLoggedIn();this.__showErrorView=!!b.showErrorView;this.__numberOfActor=IMVU.optionalProperty(b,"numberOfActor",1);this.__useExtraLargeProfile=IMVU.optionalProperty(b,"useExtraLargeProfile",!1);this.__useLargeProfile=IMVU.optionalProperty(b,"useLargeProfile",!1);this.__useSmallProfile=IMVU.optionalProperty(b,"useSmallProfile",!1);this.__forceStaticImage=b.forceStaticImage;this.__chatScene=b.chatScene;b.ignoreClicks&&this.$el.addClass("ignore-clicks");this.__useLargeProfile&&this.$el.addClass("large-profile");this.__useSmallProfile&&this.$el.addClass("small-profile");this.__useExtraLargeProfile&&this.$el.addClass("extra-large-profile");_.has(b,"user")?this.doWork([function(){d.__user=d.track(b.user,["online"],1800);return d.__user.populated()},function(){d.__profile=d.track((d.__user.node||d.__user).getSingleEdge("profile"),[],1800);d.addToDOM()}]).catch(function(e){d.__showSilhouette=!0;d.addToDOM()}):(this.__profile=this.track(IMVU.requireProperty(b,"profile")),this.addToDOM());this.__isMe=!1},render:function(){var b=this;this.$el.html(g.template({numberOfActor:this.__numberOfActor,isMultipleActor:1<this.__numberOfActor,showSilhouette:this.__showSilhouette,silhouetteHtml:g.avatarSilhouetteTemplate(),showOnlineStatus:!this.__useSmallProfile}));this.__showSilhouette||this.doWork([function(){return b.__profile.populated()},function(){return b.__getUser().populated()},function(){b.$(".online-status").toggleClass("is-online",b.__user.get("online")&&1==b.__numberOfActor);b.__loginManager.isLoggedIn()&&(b.__isMe=b.__profile.relations.restgraph_entity===b.__loginManager.getCurrentUser().id,b.__isMe&&(b.__user=b.__loginManager.getCurrentUser(),b.listenTo(b.__user,"change:availability",b.__refreshOnlineOnMyAvailability,b)));var d=b.__profile.get("avatar_name");d=_.isNull(d)||_.isUndefined(d)?"":d.replace("Guest_","");b.$el.attr("title",d);b.__refreshThumbnailUrl();b.__refreshOnline();b.listenTo(b.__user,"change:online",b.__refreshOnline);b.listenTo(b.__profile,"change:image",b.__refreshThumbnailUrl);b.listenTo(b.__user,"change",function(){this.__profile.invalidate()});b.__setAsRendered()}]).catch(function(){b.__showErrorView&&(b.__ignoreClicks=!0,b.$el.html("...").addClass("ignore-clicks"));b.__setAsRenderFailed("ProfileIcon::render - failed")})},__getUser:function(){this.__user||(this.__user=this.__profile.getSingleEdge("restgraph_entity"));return this.__user},__refreshOnline:function(){1==this.__numberOfActor&&(this.__isMe?this.$(".online-status").toggleClass("is-online",!!this.__user.get("online")&&!0===this.__profileShowOnlineIndicator()):this.$(".online-status").toggleClass("is-online",!!this.__user.get("online")))},__disabledUserAlert:function(){this.__dialogManager.alert({title:this.__globalStringManager.get("dialog_inactive_user_profile_icon_click_error")})},__onClick:function(b){var d=this;this.__ignoreClicks||(b.stopPropagation(),this.__profile?this.doWork([function(){return d.__profile.populated()},function(){return d.__getUser().populated()},function(){d.__isLoggedIn?(d.__chatScene&&d.__chatScene.__policyChat.focusOnAvatar(d.__user.get("legacy_cid").toString(),!0),d.__myself=d.__loginManager.getCurrentUser(),d.__myself.populated().then(function(){var e=this;if(this.__chatScene&&this.__user!==this.__myself||!this.__chatScene){this.__chatScene&&"shopTogether"===this.__chatScene.getType()&&this.__chatScene.toggleShopTogetherLeftSlidein(!1);var k=this.__dialogManager.showLightbox("ProfileLightbox",{user:this.__user,activeChat:this.__activeChat,chatScene:this.__chatScene});this.__chatScene&&"shopTogether"===this.__chatScene.getType()&&k.finished.catch(function(){e.__chatScene.toggleShopTogetherLeftSlidein(!0)});this.listenTo(k,"profile:coopWith",function(f){this.__activeChat.triggerEvent("profile:coopWith",f)}.bind(this))}}.bind(d))):(d.__window.console.log("ProfileIcon::__onClick - directing click to user perma link"),d.__modeManager.openMode({mode:{id:"av"},submode:{id:d.__user.get("id")}}))}]).catch(this.__disabledUserAlert.bind(this)):this.__disabledUserAlert())},tuneFidelity:function(b){var d=30;this.__useSmallProfile?d=16:this.__useLargeProfile?d=50:this.__useExtraLargeProfile&&(d=75);d*=Math.max(2,window.devicePixelRatio);b.startsWith("https://userimages-akm.imvu.com")?b="https://webasset-akm.imvu.com/resized_image/duserimages/s"+d+"x"+d+"/tmaintain_aspect_ratio/i"+encodeURIComponent(b.replace("https://userimages-akm.imvu.com","")):b.match(a)&&(b=b.replace(a,"/s"+d+"x"+d+"/"));return b},__refreshThumbnailUrl:function(){var b=this;this.doWork([function(){b.__profile.get("image")||b.__profile.invalidate();return b.__profile.populated()},function(){b.__imageManager.load(b.$("img"),b.tuneFidelity(b.__profile.get("image")),{forceStaticImage:b.__forceStaticImage}).catch(function(d){b.__showSilhouette=!0;b.render()})}]).catch(function(d){b.__showSilhouette=!0;b.render()})},__refreshOnlineOnMyAvailability:function(){1==this.__numberOfActor&&this.$(".online-status").toggleClass("is-online",this.__profileShowOnlineIndicator())},__profileShowOnlineIndicator:function(){return this.__user.get("online")?"DoNotDisturb"===this.__user.get("availability")?!1:"Available"===this.__user.get("availability")||""===this.__user.get("availability")?!0:!1:!1}})}({UiCore:n["@UiCore"],avatarSilhouetteTemplate:p,template:r});p=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=this.escapeExpression;return'<span class="display-name-wrap-text">'+b((e=a.displayName||c&&c.displayName,"function"===typeof e?e.call(c,{name:"displayName",hash:{},data:d}):e))+'</span><div class="vip-badge"></div>'},useData:!0})}({});q=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=a.helperMissing;b='<div class="vip-badge-tooltip tooltip-header"><a class="vip-badge-tooltip-cta cta">';if((a=(e=a["i18n-g"]||c&&c["i18n-g"]||k,e.call(c,"VIP Member",{name:"i18n-g",hash:{},data:d})))||0===a)b+=a;return b+"</a></div>"},useData:!0})}({});w=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){return'<svg class="badge-image" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <ellipse fill="#DEB359" cx="9" cy="9" rx="9" ry="9"/>\n        <path d="M14.87 7.303a.723.723 0 1 0-1.247.497l-2.027 1.992a.138.138 0 0 1-.222-.042L9.407 5.283a.72.72 0 0 0-.39-1.33.723.723 0 0 0-.394 1.33L6.656 9.75a.138.138 0 0 1-.222.042L4.39 7.784a.72.72 0 0 0-.537-1.204.72.72 0 1 0-.073 1.44c.114.95.633 5.27.646 5.286.18.414 2.163.74 4.59.74 2.426 0 4.41-.326 4.59-.74.01-.017.53-4.346.644-5.29a.72.72 0 0 0 .62-.713" fill="#FFF"/>\n    </g>\n</svg>'},useData:!0})}({});v=function(g){var c=g.UiCore.UiContext;return c.extend("DisplayNameWrap",{className:"display-name-wrap enable-text-selection",uiContextName:"display_name_wrap",dependencies:["dialogManager","featureAccessManager","globalStringManager","loginManager","user"],trackedEvents:function(){return[{type:"click",selector:".display-name-wrap-text",name:"display_name_wrap_text_click",handler:this.__onClickText.bind(this),allowBubble:!0}]},initialize:function(a){var b=this;c.prototype.initialize.call(this,a);this.__serviceProvider=a.serviceProvider;this.__stringManager=a.globalStringManager;this.__user=this.track(a.user);this.__loginManager=a.loginManager;this.__showErrorView=!!a.showErrorView;(this.__ignoreClicks=a.ignoreClicks||!this.__loginManager.isLoggedIn())&&this.$el.addClass("ignore-clicks");this.__showVipBadge=IMVU.optionalProperty(a,"showVipBadge",!0);this.__showVipBadgeTooltip=IMVU.optionalProperty(a,"showVipBadgeTooltip",!0);this.__showCreatorBadgeTooltip=IMVU.optionalProperty(a,"showCreatorBadgeTooltip",!1);this.__showVipBadge||(this.__showVipBadgeTooltip=!1);this.__showVipBadgeTooltip&&(this.__showVipBadge=!0);this.__showCreatorBadgeTooltip&&(this.__showVipBadge=!0,this.__showVipBadgeTooltip=!1);this.__showAsMe=IMVU.optionalProperty(a,"showAsMe",!1);this.__size=IMVU.optionalProperty(a,"size","small");this.__color=IMVU.optionalProperty(a,"color","dark");this.__marginTop=IMVU.optionalProperty(a,"marginTop",null);this.__marginLeft=IMVU.optionalProperty(a,"marginLeft",null);this.__nameOverride=IMVU.optionalProperty(a,"nameOverride",null);this.__width=IMVU.optionalProperty(a,"width",null);null!==this.__nameOverride&&(this.__showAsMe=this.__showCreatorBadgeTooltip=this.__showVipBadgeTooltip=this.__showVipBadge=!1,this.__ignoreClicks=!0);this.addToDOM();this.doWork([function(){var d="change:"+b.__getDisplayNameWrapKey();b.listenTo(b.__user,d,g.NextUtil.mirrorModelChange(".display-name-wrap-text"))}])},__getDisplayNameWrapKey:function(){return-1!==this.__user.id.indexOf("profile-")?"title":"display_name"},assignSize:function(a){"undefined"!==typeof a&&(this.__size=a);this.$el.removeClass("dnw-s-tiny");this.$el.removeClass("dnw-s-small");this.$el.removeClass("dnw-s-medium");this.$el.removeClass("dnw-s-large");this.$el.removeClass("dnw-s-big");switch(this.__size){case"tiny":case"small":case"medium":case"large":case"big":this.$el.addClass("dnw-s-"+this.__size)}},assignColor:function(a){"undefined"!==typeof a&&(this.__color=a);this.$el.removeClass("dnw-fc-white");this.$el.removeClass("dnw-fc-light-gray");this.$el.removeClass("dnw-fc-dark-gray");switch(this.__color){case"light":this.$el.addClass("dnw-fc-white");break;case"medium":this.$el.addClass("dnw-fc-light-gray");break;case"dark":this.$el.addClass("dnw-fc-dark-gray")}},assignDisplay:function(a){},render:function(){var a=this;this.doWork([function(){null!==a.__nameOverride?(a.$el.html(g.template({displayName:a.__nameOverride})),a.__setAsRendered()):(a.$el.html(g.template),a.__addRenderGatingPromise(a.__user.populated()),a.doWork([function(){return a.__user.populated()},function(){a.__showAsMe?a.$el.html(g.template({displayName:a.__stringManager.get("You")})):a.$el.html(g.template({displayName:a.__user.get(a.__getDisplayNameWrapKey())}));var b=a.__user.get("is_vip")&&a.__showVipBadge;b&&(a.$(".vip-badge").append(g.templateVipBadge),b&&a.__showVipBadgeTooltip?(a.$(".vip-badge").append(g.templateVipBadgeToolTip),a.__tooltip=a.createChildContext(g.Tooltip,{$replaceElement:a.$(".vip-badge-tooltip"),$tooltipTarget:a.$(".vip-badge"),title:" ",tooltipStyle:"snug",trackedEvents:[{type:"click",selector:".cta",name:"vip_badge_tooltip_click",handler:a.__vipBadgeClick.bind(a)}]}),a.__addRenderGatingPromise(a.__tooltip.getHasRenderedPromise())):a.__showCreatorBadgeTooltip&&(a.$(".display-name-badges").append(g.templateCreatorBadgeToolTip),a.__tooltip=a.createChildContext(g.Tooltip,{$replaceElement:a.$(".vip-badge-tooltip"),$tooltipTarget:a.$(".vip-badge"),title:" ",tooltipStyle:"snug",trackedEvents:[{type:"click",selector:".cta",name:"creator_vip_badge_tooltip_click",handler:a.__creatorVipBadgeClick.bind(a)}]}),a.__addRenderGatingPromise(a.__tooltip.getHasRenderedPromise())),a.__waitOnRenderGatingPromises())}]).catch(function(){a.__showErrorView&&(a.__ignoreClicks=!0,a.$el.html("...").addClass("ignore-clicks"))}));a.assignSize();a.assignColor();a.__showVipBadge||a.$(".vip-badge").addClass("vip-badge-hidden")}])},__onClickText:function(a){this.__ignoreClicks||(this.__dialogManager.showLightbox("ProfileLightbox",{user:this.__user}),a.stopPropagation())},__vipBadgeClick:function(){this.__dialogManager.closeAll();return this.__dialogManager.showMultiCartUpsellDialog({upsellProduct:"vip",vipTrigger:"vip_badge_display_name",contextual:!0})},__creatorVipBadgeClick:function(){return this.__dialogManager.showMultiCartUpsellDialog({isCreatorLanding:!0,upsellProduct:"vip",vipTrigger:"creator_vip_badge",contextual:!0})}})}({NextUtil:n["@NextUtil"],UiCore:n["@UiCore"],Tooltip:u,template:p,templateCreatorBadgeToolTip:v,templateVipBadge:w,templateVipBadgeToolTip:q});z=function(g){var c=g.UiCore.UiContext;return c.extend("DualName",{className:"dual-name enable-text-selection",uiContextName:"dual_name",dependencies:"dialogManager featureAccessManager globalStringManager loginManager modeManager Promise user window".split(" "),trackedEvents:function(){return[{type:"click",selector:".dual-name",name:"dual_name_click",handler:this.__onClickWidget.bind(this),allowBubble:!0},{type:"click",selector:".dual-name-icon",name:"dual_name_icon_click",handler:this.__onClickWidget.bind(this),allowBubble:!0},{type:"click",selector:".dual-name-names",name:"dual_name_names_click",handler:this.__onClickWidget.bind(this),allowBubble:!0}]},setConfiguration:function(a){"undefined"!==typeof a&&(this.__configuration=a);switch(this.__configuration){case"large-dual-lightbg":this.__hideIcon=!1;this._size="medium";this.__orient="horizontal";this.__shouldRemoveTruncate=this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"medium",color:"dark"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium",shouldRemoveTruncate:!0});break;case"large-dual-darkbg":this.__hideIcon=!1;this._size="medium";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"medium",color:"light"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium"});break;case"large-dual-orange":this.__hideIcon=!1;this._size="medium";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"medium",color:"orange"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium"});break;case"large-single-lightbg":this.__hideIcon=!1;this.__size="medium";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"dark"});this.__hideAtAvatar=!0;break;case"large-single-darkbg":this.__hideIcon=!1;this.__size="medium";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!0;break;case"large-single-orange":this.__hideIcon=!1;this.__size="medium";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"orange"});this.__hideAtAvatar=!0;break;case"large-img-small-dual-text-lightbg":this.__hideIcon=!1;this._size="medium";this.__orient="horizontal";this.__shouldRemoveTruncate=this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"dark"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium",shouldRemoveTruncate:!0});break;case"small-dual-lightbg":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"dark"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium"});break;case"small-dual-darkbg":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium"});break;case"small-dual-orange":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"orange"});this.__hideAtAvatar=!1;$.extend(this.__atAvatarArgs,{size:"small",color:"medium"});break;case"small-single-lightbg":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"dark"});this.__hideAtAvatar=!0;break;case"small-single-darkbg":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!0;break;case"small-single-orange":this.__hideIcon=!1;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"orange"});this.__hideAtAvatar=!0;break;case"small-noicon-darkbg":this.__hideIcon=!0;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!0;break;case"small-noicon-orange":this.__hideIcon=!0;this.__size="small";this.__orient="horizontal";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!0;break;case"small-single-split-darkbg":this.__hideIcon=!1;this.__size="small";this.__orient="vertical";this.__hideDisplay=!1;$.extend(this.__displayArgs,{size:"small",color:"light"});this.__hideAtAvatar=!0;break;case"small-single-split-orange":this.__hideIcon=!1,this.__size="small",this.__orient="vertical",this.__hideDisplay=!1,$.extend(this.__displayArgs,{size:"small",color:"orange"}),this.__hideAtAvatar=!0}},setParameters:function(a){this.__size=IMVU.optionalProperty(a,"size","medium");this.__orient=IMVU.optionalProperty(a,"orientation","horizontal");this.__hoverOn=IMVU.optionalProperty(a,"hoverOn",!1);this.__displayArgs=IMVU.optionalProperty(a,"displayArgs",{});this.__atAvatarArgs=IMVU.optionalProperty(a,"atAvatarArgs",{});this.__hideIcon=IMVU.optionalProperty(a,"hideIcon",!1);this.__hideDisplay=IMVU.optionalProperty(a,"hideDisplay",!1);this.__hideAtAvatar=IMVU.optionalProperty(a,"hideAtAvatar",!1);this.setConfiguration(IMVU.optionalProperty(a,"configuration",null));this.__hideDisplay&&this.__hideAtAvatar&&(this.__hideAtAvatar=this.__hideDisplay=!1);"vertical"==this.__orient&&(this.__hideIcon=!1)},initialize:function(a){var b=this;c.prototype.initialize.call(this,a);this.__window=a.window;this.__modeManager=a.modeManager;this.__serviceProvider=a.serviceProvider;this.__stringManager=a.globalStringManager;this.__featureAccessManager=a.featureAccessManager;this.__user=this.track(a.user,["online"],900);this.__activeChat=IMVU.optionalProperty(a,"activeChat",null);this.__isHost=IMVU.optionalProperty(a,"isHost",!1);this.__loginManager=a.loginManager;this.__showErrorView=!!a.showErrorView;this.__ignoreClicks="undefined"!==typeof a.ignoreClicks?!!a.ignoreClicks:!this.__loginManager.isLoggedIn();this.__shouldRemoveTruncate=IMVU.optionalProperty(a,"shouldRemoveTruncate",!1);this.__shouldWrap=IMVU.optionalProperty(a,"shouldWrap",!1);this.__forceStaticImage=a.forceStaticImage;this.__useLargeProfile=a.useLargeProfile;this.__chatScene=a.chatScene||null;this.__displayNamePromise=new this.__Promise(function(d){b.__displayNamePromiseResolver=d});this.__isLoggedIn=this.__loginManager.isLoggedIn();this.__ignoreClicks&&this.$el.addClass("ignore-clicks");this.__shouldRemoveTruncate&&(this.__shouldWrap=!1);this.setParameters(a);this.addToDOM()},assignSize:function(a){"undefined"!==typeof a&&(this.__size=a);this.$el.removeClass("dln-s-tiny");this.$el.removeClass("dln-s-small");this.$el.removeClass("dln-s-medium");this.$el.removeClass("dln-s-large");this.$el.removeClass("dln-s-big");switch(this.__size){case"tiny":case"small":case"medium":case"large":case"big":this.$el.addClass("dln-s-"+this.__size)}},assignOrientation:function(a){"undefined"!==typeof a&&(this.__orient=a);this.$el.removeClass("dln-o-horiz");this.$el.removeClass("dln-o-vert");switch(this.__orient){case"horizontal":this.$el.addClass("dln-o-horiz");break;case"vertical":this.$el.addClass("dln-o-vert")}},positionNameWidgets:function(){"vertical"==this.__orient?this.__hideDisplay||this.__hideAtAvatar||(this.$(".display-name").hasClass("display-name-spacer")?this.$(".display-name").removeClass("display-name-spacer"):this.$(".display-name").addClass("display-name-spacer")):this.__hideIcon&&this.$(".dual-name-names").css({"padding-top":"0","padding-bottom":"0"})},assignHideIcon:function(a){"undefined"!==typeof a&&(this.__hideIcon=!!a);this.__hideIcon?this.$el.hasClass("dual-name-icon-hidden")||this.$el.addClass("dual-name-icon-hidden"):this.$el.removeClass("dual-name-icon-hidden")},assignHideDisplay:function(a){"undefined"!==typeof a&&(this.__hideDisplay=!!a);"undefined"!==typeof this.__displayName&&this.__displayName.assignDisplay(this.__hideDisplay?"hidden":"flex")},assignHideAtAvatar:function(a){"undefined"!==typeof a&&(this.__hideAtAvatar=!!a);"undefined"!==typeof this.__atAvatarName&&this.__atAvatarName.assignDisplay(this.__hideAtAvatar?"hidden":"flex")},drawIt:function(){this.__displayName&&(this.__displayName.assignSize(this.__displayArgs.size),this.__displayName.assignColor(this.__displayArgs.color));this.__atAvatarName&&(this.__atAvatarName.assignSize(this.__atAvatarArgs.size),this.__atAvatarName.assignColor(this.__atAvatarArgs.color));this.assignSize();this.assignOrientation();this.positionNameWidgets();this.assignHideIcon();this.assignHideDisplay();this.assignHideAtAvatar()},render:function(){var a=this;this.__addRenderGatingPromise(this.__user.populated());this.doWork([function(){a.$el.html(g.template);return a.__user.populated()},function(){a.$el.html(g.template);var b=a.__ignoreClicks?{ignoreClicks:!0}:{};if(!a.__hideIcon){var d=a.__user;-1===a.__user.id.indexOf("profile-")&&(d=a.__user.getSingleEdge("profile"));d={$parentElement:a.$(".dual-name-icon"),profile:d,modeManager:a.__modeManager,activeChat:a.__activeChat,forceStaticImage:a.__forceStaticImage,chatScene:a.__chatScene,useLargeProfile:a.__useLargeProfile};$.extend(d,b);a.__profileIcon=a.createChildContext(g.ProfileIcon,d);a.__addRenderGatingPromise(a.__profileIcon.getHasRenderedPromise())}a.$el.toggleClass("is-host",a.__isHost);d={$parentElement:a.$(".dual-name-names"),user:a.__user,display:"flex",modeManager:a.__modeManager,chatScene:a.__chatScene};$.extend(d,b);$.extend(a.__displayArgs,d);$.extend(a.__atAvatarArgs,d);a.__shouldWrap?a.__displayName=a.createChildContext(g.DisplayNameWrap,a.__displayArgs):($.extend(a.__displayArgs,{shouldRemoveTruncate:a.__shouldRemoveTruncate}),a.__displayName=a.createChildContext(g.DisplayName,a.__displayArgs));a.__addRenderGatingPromise(a.__displayName.getHasRenderedPromise());a.__displayNamePromiseResolver.resolve();a.__atAvatarName=a.createChildContext(g.AtAvatarName,a.__atAvatarArgs);a.__addRenderGatingPromise(a.__atAvatarName.getHasRenderedPromise());a.drawIt();a.__waitOnRenderGatingPromises()}]).catch(function(){a.__showErrorView&&(a.__ignoreClicks=!0,a.$el.html("...").addClass("ignore-clicks"))})},getDisplayName:function(){var a=this;return this.__displayNamePromise.then(function(){return a.__displayName})},__onClickWidget:function(a){this.__ignoreClicks||(a.stopPropagation(),this.__user&&this.__user.populated().then(function(){this.__isLoggedIn?(this.__chatScene&&this.__chatScene.getCurrentPolicyChat().focusOnAvatar(this.__user.get("legacy_cid").toString(),!0),this.__dialogManager.showLightbox("ProfileLightbox",{user:this.__getUser(),activeChat:this.__activeChat,chatScene:this.__chatScene})):this.__modeManager.openMode({mode:{id:"av"},submode:{id:this.__user.get("id")}})}.bind(this)))},__getUser:function(){this.__user.id.match(/\/profile\//i)&&(this.__user=this.__user.getSingleEdge("restgraph_entity"));return this.__user},onMouseover:function(a){this.__hoverOn&&("undefined"!==typeof this.__displayName&&this.__displayName.addHovering(),"undefined"!==typeof this.__atAvatarName&&this.__displayName.addHovering())},onMouseleave:function(a){this.__hoverOn&&("undefined"!==typeof this.__displayName&&this.__displayName.removeHovering(),"undefined"!==typeof this.__atAvatarName&&this.__displayName.removeHovering())}})}({NextUtil:n["@NextUtil"],UiCore:n["@UiCore"],AtAvatarName:x,DisplayName:y,DisplayNameWrap:v,ProfileIcon:r,template:z});p=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){return"disabled"},3:function(c,a,b,d){var e;b=this.escapeExpression;return'<div class="custom-amount-input-tooltip">'+b((e=a.tooltip||c&&c.tooltip,"function"===typeof e?e.call(c,{name:"tooltip",hash:{},data:d}):e))+"</div>"},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=this.escapeExpression;b='<div class="custom-amount-input-title">'+k((e=a.title||c&&c.title,"function"===typeof e?e.call(c,{name:"title",hash:{},data:d}):e))+'</div>\n<input type="text" inputmode="decimal" class="custom-amount-input no-focus" placeholder="'+k((e=a.placeholder||c&&c.placeholder,"function"===typeof e?e.call(c,{name:"placeholder",hash:{},data:d}):e))+'" ';if((e=a["if"].call(c,c&&c.disabled,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}))||0===e)b+=e;b+=">\n";if((e=a["if"].call(c,c&&c.tooltip,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}))||0===e)b+=e;return b},useData:!0})}({});q=function(g){var c=function(f){var h=Math.round(f/1e6*10)/10;if(1<=h)return h+"M views";h=Math.round(f/1e3);return 1<=h?h+"K views":f+" views"},a=function(f){var h=$jscomp.makeIterator(f.match(/((\d+)H)?((\d+)M)?((\d+)S)?$/));h.next();h.next();f=h.next().value;h.next();var l=h.next().value;h.next();h=h.next().value;var m="";f&&(m=""+f);m=l?(m?m+":":"")+l.padStart(2,"0"):m?m+":00":"00";return m=h?m+":"+h.padStart(2,"0"):m+":00"},b=function(f){return function(h){return f.reduce(function(l,m){return m(l)},h)}},d=function(f){f=f.toString().split(".");f[0]=f[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return f.join(".")},e=function(f){return isNaN(f)||Math.floor(f)===f?0:f.toString().split(".")[1].length||0},k=function(f,h){if(e(f)<=h)return parseFloat(f).toFixed(h);var l=Math.pow(10,h);return(Math.trunc(f*l)/l).toFixed(h)};return{getTimeFormat:function(f,h){var l=Math.floor(f/3600),m=Math.floor(f/60)-60*l;f%=60;h&&(f=f.toFixed(h));h=10>f?"0":"";return l?l+":"+(10>m?"0":"")+m+":"+h+f:m+":"+h+f},formatCredits:function(f){return f.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},zeroPad:function(f,h){return(Array(h).join("0")+f).substr(-h,h)},formatMini:function(f,h){var l=[{base:1e3,letter:"K"},{base:1e6,letter:"M"},{base:1e9,letter:"B"}];if(f<(h?h:1e3))return d(f);for(var m=l.length-1;0<=m;m--){h=l[m];var t=h.base;if(f>=t)return l=Math.floor(f/t),f=Math.floor((f-t*l)/(t/10)),l+(f?"."+f:"")+h.letter}return""+f},addComma:d,formatDecimal:k,formatVCOIN:function(f){return d(k(f,2))},countDecimals:e,durationParser:a,viewFormatter:c,formatYouTubeVideoMetaData:function(f){return f.items.map(function(h){var l=h.snippet,m=h.contentDetails,t=h.id,A=h.status;return{imageUrl:l.thumbnails.medium.url,videoTitle:l.title,videoAuthor:l.channelTitle,videoDescription:l.description,totalViews:c(h.statistics.viewCount),duration:a(m.duration),isoDuration:m.duration,published:g.moment(l.publishedAt).fromNow(),videoId:t,embeddable:A.embeddable}})},getSuggestionsFromResponse:function(f){return b([function(h){return JSON.parse(h.match(/\((.*)\)/)[1])},function(h){return h[1]},function(h){return h.map(function(l){return l[0]})}])(f)},getTokenFromResponse:function(f){return b([function(h){return JSON.parse(h.match(/\((.*)\)/)[1])},function(h){return h[2]},function(h){return h.q}])(f)}}}({moment:n["@moment"]});p=function(g){var c=g.UiCore.UiContext;return c.extend("CustomAmountInputField",{className:"custom-amount-input-field",uiContextName:"custom_amount_input_field",dependencies:[],trackedEvents:function(){return[{type:"keydown",selector:"input",name:"custom_amount_input",handler:"__handleInput"},{type:"input",selector:"input",name:"custom_amount_input",handler:"__handleInput"},{type:"paste",selector:"input",name:"custom_amount_input",handler:"__handleInput"}]},initialize:function(a){c.prototype.initialize.call(this,a);this.__formatNumber=g.FormatNumber;this.__title=IMVU.requireProperty(a,"title","Enter Amount");this.__placeholder=IMVU.optionalProperty(a,"placeholder","");this.__tooltip=IMVU.optionalProperty(a,"tooltip",null);this.__decimalsCount=IMVU.optionalProperty(a,"decimalsCount",2);this.__disabled=IMVU.optionalProperty(a,"disabled",!1);this.addToDOM()},render:function(){this.$el.html(g.template({title:this.__title,placeholder:this.__placeholder,tooltip:this.__tooltip,disabled:this.__disabled}))},__handleInput:function(a){var b=a.target,d=b.selectionEnd,e=b.value.length,k=b.value.replace(/,/g,""),f=a.keyCode?a.keyCode:a.which;0!=this.__decimalsCount||110!=f&&190!=f||a.preventDefault();-1!==[8,9,13,27,46,110,190].indexOf(f)||65==f&&(a.ctrlKey||a.metaKey)||35<=f&&40>=f||48<=f&&57>=f&&!a.shiftKey&&!a.altKey||96<=f&&105>=f||a.preventDefault();var h=new RegExp("^(?:,?\\d){1,7}(?:\\.\\d{0,"+this.__decimalsCount+"})?$","g");96<=f&&105>=f&&(f-=48);var l=String.fromCharCode(f);(48<=f&&57>=f||96<=f&&105>=f)&&!h.test(""+k+l)&&a.preventDefault();b.value=this.__formatNumber.addComma(k);b.selectionEnd=d+(b.value.length-e);""!==k?this.trigger("input",parseFloat(k)):this.trigger("input",k)},toggleInputError:function(a,b){a?(this.$el.addClass("error"),b&&this.$(".custom-amount-input-tooltip").text(b)):(this.$el.removeClass("error"),this.$(".custom-amount-input-tooltip").text(this.__tooltip))},setValue:function(a){this.$(".custom-amount-input").val(a)}})}({UiCore:n["@UiCore"],FormatNumber:q,template:p});q=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=a.helperMissing;var k='<div class="edge-collection-init-error">\n    ',f=(e=a.icon||c&&c.icon||b,e.call(c,"icon-feed_error",{name:"icon",hash:{},data:d}));if(f||0===f)k+=f;k+="\n    <div class='error-title'>";if((f=(e=a["i18n-g"]||c&&c["i18n-g"]||b,e.call(c,"feed-error-title",{name:"i18n-g",hash:{},data:d})))||0===f)k+=f;k+="</div>\n    <div class='error-text'>";if((f=(e=a["i18n-g"]||c&&c["i18n-g"]||b,e.call(c,"feed-error-text",{name:"i18n-g",hash:{},data:d})))||0===f)k+=f;return k+"</div>\n</div>"},useData:!0})}({});w=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e,k=a.helperMissing;b='<div class="notation page-error">';if((a=(e=a["i18n-g"]||c&&c["i18n-g"]||k,e.call(c,"edge_collection_page_error",{name:"i18n-g",hash:{},data:d})))||0===a)b+=a;return b+"</div>"},useData:!0})}({});var B=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=this.escapeExpression;return'<div class="notation reached-end">'+b((e=a.text||c&&c.text,"function"===typeof e?e.call(c,{name:"text",hash:{},data:d}):e))+"</div>"},useData:!0})}({}),C=function(){var g=Handlebars.template;Handlebars.templates=Handlebars.templates||{};return g({1:function(c,a,b,d){return'<span class="tool-tip">?</span>'},3:function(c,a,b,d){var e;b=this.escapeExpression;return'<div class="tool-tip-content">'+b((e=a.toolTipContent||c&&c.toolTipContent,"function"===typeof e?e.call(c,{name:"toolTipContent",hash:{},data:d}):e))+"</div>"},compiler:[5,">= 2.0.0"],main:function(c,a,b,d){var e;b=this.escapeExpression;var k='<div class="no-results notation">\n    <span class="standard-text">'+b((e=a.standard||c&&c.standard,"function"===typeof e?e.call(c,{name:"standard",hash:{},data:d}):e)),f=a["if"].call(c,c&&c.hasToolTip,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d});if(f||0===f)k+=f;k+='</span>\n    <span class="concise-text">'+b((e=a.concise||c&&c.concise,"function"===typeof e?e.call(c,{name:"concise",hash:{},data:d}):e));if((f=a["if"].call(c,c&&c.hasToolTip,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}))||0===f)k+=f;k+="</span>\n    ";if((f=a["if"].call(c,c&&c.hasToolTip,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}))||0===f)k+=f;return k+"\n</div>"},useData:!0})}({});n=function(g){var c=g.UiCore.EdgeCollectionPresenter;return c.extend("EdgeCollectionPresenter",{dependencies:["appMonitor","multiGetManager","timer","window"],multiGetCollection:function(){this.__multiGetManager.queue(this.collection);this.__multiGetManager.requestReact(this.__multiGetManager.USER_END_POINT);this.__multiGetManager.request()},initialize:function(a){var b=this;this.__manuallyPage=!!a.manuallyPage;c.prototype.initialize.call(this,a);this.__pagingDisabled="undefined"===typeof this.__pagingDisabled?!1:this.__pagingDisabled;this.__isRecommended="undefined"===typeof this.__isRecommended?null:this.__isRecommended;this.__nextPageRequested=!1;this.$el.addClass("is-list");this.__addRenderGatingPromise(this.collection.populated());this.collection.populated().then(function(){for(var d=b.getItems(),e=0;e<d.length;e++)b.__addRenderGatingPromise(d[e].getHasRenderedPromise())});this.__waitOnRenderGatingPromises()},_testDisablePaging:function(){this.__pagingDisabled=!0},renderTemplate:function(){var a=this;this.doWork([function(){a.__updateEmpty();a.__updateReachedEnd();a.collection.on("add remove reset",a.__updateEmpty.bind(a))}])},__updateEmpty:function(){if(0!==this.collection.models.length||this.__$empty)this.collection.models.length&&this.__$empty&&(this.__$empty.remove(),this.__$empty=null);else{var a=this.__emptyText();a&&(this.__$empty=$(g.emptyTemplate({standard:a.standard,concise:a.concise,hasToolTip:"hasToolTip"in a&&void 0!==a.hasToolTip?1:0,toolTipText:"toolTipText"in a&&void 0!==a.toolTipText?a.toolTipText:"",toolTipContent:"toolTipContent"in a&&void 0!==a.toolTipContent?a.toolTipContent:""})),this.$el.append(this.__$empty),this.__tooltip=this.createChildContext(g.Tooltip,{$replaceElement:this.$(".tool-tip-content"),$tooltipTarget:this.$(".tool-tip")}))}},__updateReachedEnd:function(){if(!this.__$reachedEnd&&this.collection.length&&!this.collection.hasNextPage()){var a=this.__reachedEndText();a&&(this.__$reachedEnd=$(g.reachedEndTemplate({text:a})),this.$el.append(this.__$reachedEnd))}},__onPaged:function(){this.__nextPageRequested=!1;this.multiGetCollection();this.__manuallyPage||c.prototype.__onPaged.call(this);this.$el.removeClass("loading");this.__updateReachedEnd()},__onScroll:function(){this.collection.hasNextPage()&&"undefined"!==typeof this.collection.relations.next&&!this.__nextPageRequested&&(this.__nextPageRequested=!0,this.__multiGetManager.getReact(this.collection.relations.next));this.__manuallyPage||c.prototype.__onScroll.call(this)},__ensureContainerFilled:function(){this.__manuallyPage||c.prototype.__ensureContainerFilled.call(this)},viewMore:function(){this.__maybePage()},__shouldPage:function(){return this.__pagingDisabled?!1:this.__manuallyPage?this.__readyToPage():c.prototype.__shouldPage.call(this)},__arrangeAndReattach:function(a){c.prototype.__arrangeAndReattach.call(this,a);this.__$reachedEnd&&this.__$reachedEnd.detach().appendTo(this.$el)},onInitError:function(){this.__appMonitor.waypoint("ProfileList::onInitError");this.__setInitError();this.__loadFailureTimeout=this.__timer.setTimeout(this.__recoverFromLoadFail.bind(this,0),5e3)},onPageError:function(){this.__appMonitor.waypoint("ProfileList::onPageError");this.__setPageError();this.__pageFailureTimeout=this.__timer.setTimeout(this.__recoverFromPageFail.bind(this,0),6e4)},__recoverFromLoadFail:function(a){var b=this;this.doWork([function(){b.__removeInitError();b.collection.invalidate();return b.collection.enumerated()},function(){return b.render()}]).catch(function(){var d=a&&0<a?15===a?45:180<=a?180:2*a:15;window.console.log("Waiting "+d+" seconds to reload");b.__setInitError();b.__loadFailureTimeout=b.__timer.setTimeout(b.__recoverFromLoadFail.bind(b,d),1e3*d)})},__recoverFromPageFail:function(){this.__removePageError();this.__noVisibilityChecks=!1;this.__maybePage()},__setInitError:function(){this.__$initError=$(g.initErrorTemplate({}));this.$el.append(this.__$initError)},__removeInitError:function(){this.__$initError&&(this.__$initError.remove(),this.__$initError=null)},__setPageError:function(){this.__$pageError=$(g.pageErrorTemplate({}));this.$el.append(this.__$pageError)},__removePageError:function(){this.__$pageError&&(this.__$pageError.remove(),this.__$pageError=null)},delete:function(){c.prototype.delete.call(this);this.__timer.clearTimeout(this.__loadFailureTimeout);this.__timer.clearTimeout(this.__pageFailureTimeout)},__emptyText:function(){},__reachedEndText:function(){}})}({Model:n["@Model"],UiCore:n["@UiCore"],Tooltip:u,emptyTemplate:C,initErrorTemplate:q,pageErrorTemplate:w,reachedEndTemplate:B});return{AtAvatarName:x,CustomAmountInputField:p,DisplayName:y,DisplayNameWrap:v,DualName:z,EdgeCollectionPresenter:n,ProfileIcon:r}});